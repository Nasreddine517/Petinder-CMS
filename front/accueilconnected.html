<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./accueilconnected.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">


</head>
<body>
    
    <div class="header">
    <div class="en-tete">
        <div class="gauche">
            <img src="./assets/logo_reda-removebg-preview.png" alt="Petinder">
        </div>

        <nav class="milieu">
            <a href="accueilconnected.html" class="active">Accueil</a>
            <a href="profilesconnected.html">Tous les Profiles</a>
            <a href="carte.html">Chercher Par Localisation</a>
        </nav>

        <div class="droite">
            <!-- Affiche le nom d'utilisateur -->
            <span id="userWelcome" style="margin-right: 15px; font-weight: 500; color: #333;">
                Bonjour, <span id="userName"></span>!
            </span>
            <!-- Bouton de d√©connexion -->
           
        </div>
    </div>
</div>

   <section class="sous-header">
        <div class="intro">
            <h1>Le 1er site de rencontre pour animaux üêæ</h1>
            <p>Cr√©ez un profil pour votre animal et trouvez-lui son compagnon id√©al <br> d√®s aujourd'hui.</p>
            <a href="creercompte.html" class="btn2">Cr√©er un profil</a>
        </div>
    </section>

    <section class="sous-header1">
        <div class="concept">
            <div class="texte">
                <h2>Un Concept au poil üêæ</h2>
                <p>
                    Petinder est un site de rencontre pour animaux de compagnie permettant de mettre
                    en relation des particuliers ainsi que des √©leveurs pour :
                </p>

                <ul>
                    <li><i class="fa-solid fa-check"></i> Permettre aux propri√©taires de proposer leur animal pour une saillie.</li>
                    <li><i class="fa-solid fa-check"></i> Permettre aux propri√©taires d‚Äôavoir une port√©e de leur animal.</li>
                    <li><i class="fa-solid fa-check"></i> Permettre aux propri√©taires d‚Äô√©changer et de rencontrer des chiens et chats de la m√™me race que les leurs.</li>
                </ul>

                <p>
                    En rejoignant notre communaut√©, vous trouverez des ma√Ætres tout aussi passionn√©s que vous.
                </p>
            </div>

            <div class="images">
                <img src="./assets/chien noir lunettes.avif" alt="mockup app 1">
                <img src="./assets/chien orange lunettes.avif" alt="mockup app 2">
            </div>
        </div>
    </section>

   <section class="sous-header2">
        <div class="contenu">
            <div class="image">
                <img src="./assets/freya-song-9am5_wum0bE-unsplash.jpg" alt="√©quipe Dates for Pets">
            </div>

            <div class="texte">
                <p class="citation"><i class="fa-solid fa-quote-left"></i></p>
                <p class="description">
                    Petinder est une jeune soci√©t√© innovante cr√©√©e par deux auxiliaires v√©t√©rinaires exp√©riment√©es.
                    Un duo explosif men√© d'une patte de ma√Ætre par D√©borah et Marine‚Ä¶
                </p>
                <a href="profilesconnected.html" class="btn1">Voir tous les profils</a>
            </div>
        </div>
    </section>

   <section class="sous-header3">
        <div class="contenu3">
            <div class="haut">
                <h2>Nos derniers profils</h2>
                <p>Nous v√©rifions l'authenticit√© de chaque profil avant sa publication.</p>
            </div>

            <div class="profils">
                <div class="carte-profil">
                    <img src="./assets/sousheader (1).webp" alt="Newton">
                    <h3>Newton</h3>
                    <p class="race">Golden Labrador Retriever<br>(Male (4 mois))</p>
                    <a href="profilesconnected.html" class="btn10">Voir autres</a>
                </div>

                <div class="texte-droite">
                    <p>
                        L'acc√®s aux profils est exclusivement d√©di√© aux membres connect√©s.
                        Explorez notre communaut√© et trouvez le compagnon id√©al pour votre animal !
                    </p>
                    <a href="ajouterprofile.html" class="btn1">Cr√©er un profil</a>
                </div>
            </div>
        </div>
    </section>

    <section class="sous-header4">
        <div class="contenu4">
            <h2>Nos engagements</h2>

            <div class="engagements">
                <div class="engagement">
                    <img src="./assets/amour chien.webp" alt="Respect de l‚Äôanimal">
                    <h3>Respect de l‚Äôanimal</h3>
                </div>

                <div class="engagement">
                    <img src="./assets/site securise.avif" alt="Site s√©curis√©">
                    <h3>Site s√©curis√©</h3>
                </div>

                <div class="engagement">
                    <img src="./assets/service client.jpg" alt="Service client d√©di√©">
                    <h3>Service client d√©di√©</h3>
                </div>
            </div>

            <a href="savoir.html" class="btn1"></i>En savoir plus</a>
        </div>
    </section>

    <footer class="footer">
      <div class="footer-container">
        
            <div class="footer-about">
                <img src="assets/logo_reda-removebg-preview.png" alt="Dates For Pets" class="footer-logo">
                <h3>A propos de Petinder</h3>
                <p>
                    Petinder est un site de rencontre pour animaux de compagnie permettant de mettre en relation des particuliers et des √©leveurs
                    en vue de faire se reproduire leur compagnon afin d‚Äôavoir une port√©e. Il a pour but de simplifier vos recherches et ainsi vous
                    proposer des canid√©s et f√©lid√©s de race pour des rencontres de qualit√© au plus pr√®s de chez vous.
                </p>
            </div>

        
            <div class="footer-links">
                <div class="links-col">
                    <a href="#">Profils</a>
                    <a href="#">Formules</a>
                    <a href="#">Qui sommes nous ?</a>
                    <a href="#">Actu</a>
                    <a href="#">Contact</a>
                </div>
                <div class="links-col">
                    <a href="#">CGV</a>
                    <a href="#">Mentions l√©gales</a>
                    <a href="#">Utilisation des cookies</a>
                </div>
            </div>

        
            <div class="footer-social">
                <h3>Suivez-nous</h3>
                <div class="social-icons">
                    <a href="#"><img src="assets/image1.png" alt="Instagram"></a>
                    <a href="#"><img src="assets/facebook img 2.webp" alt="Facebook"></a>
                </div>
            </div>
      </div>

      <hr>
      <p class="footer-bottom">¬© 2025 Dates For Pets - Tous droits r√©serv√©s</p>
    </footer>

    <div id="cookie-banner" class="cookie-banner">
        <p>
            üç™ Ce site utilise des cookies pour am√©liorer votre exp√©rience.
            <button id="accept-cookies">Accepter</button>
        </p>
    </div>

    <div id="toogle" class="toogle">
        <div class="rec"></div>
        <div class="rec"></div>
        <div class="rec"></div>
    </div>

    <div id="navbar" class="navbar">
        <button class="btn">Tous les profiles</button>
        <button class="btn">Formules</button>
        <button class="btn">qui-somme-nous ?</button>
        <button class="btn">Actu</button>
        <button class="btn">Contact</button>
    </div>

    

    <script src="index.js"></script>

    <!-- SCRIPT DE V√âRIFICATION D'AUTHENTIFICATION -->
<script>
    document.addEventListener('DOMContentLoaded', async function() {
        // V√©rifier si l'utilisateur est connect√©
        const token = localStorage.getItem('auth_token');
        const userName = localStorage.getItem('user_name');
        const userEmail = localStorage.getItem('user_email');
        
        if (!token) {
            // Si pas de token, rediriger vers la page de connexion
            console.log('Pas de token, redirection vers seconnecter.html');
            window.location.href = 'seconnecter.html';
            return;
        }
        
        // Afficher les informations utilisateur
        if (userName) {
            document.getElementById('userName').textContent = userName;
        }
        
        // V√©rifier la validit√© du token aupr√®s du backend
        try {
            const response = await fetch('http://localhost:5000/api/auth/check', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            const data = await response.json();
            
            if (!response.ok) {
                // Token invalide, d√©connecter
                console.log('Token invalide, d√©connexion');
                localStorage.clear();
                window.location.href = 'seconnecter.html';
                return;
            }
            
            // Token valide, on peut rester sur la page
            console.log('Utilisateur authentifi√©:', data.user);
            
            // Mettre √† jour les informations utilisateur si besoin
            if (data.user && data.user.name) {
                localStorage.setItem('user_name', data.user.name);
                localStorage.setItem('user_email', data.user.email);
                document.getElementById('userName').textContent = data.user.name;
            }
            
        } catch (error) {
            console.error('Erreur de v√©rification:', error);
            localStorage.clear();
            window.location.href = 'seconnecter.html';
        }
    });
    
    // Fonction de d√©connexion
    async function logout() {
        const token = localStorage.getItem('auth_token');
        
        if (token) {
            try {
                // Appeler l'API de d√©connexion
                await fetch('http://localhost:5000/api/auth/logout', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });
            } catch (error) {
                console.error('Erreur lors de la d√©connexion:', error);
            }
        }
        
        // Nettoyer le localStorage
        localStorage.removeItem('auth_token');
        localStorage.removeItem('user_name');
        localStorage.removeItem('user_email');
        localStorage.removeItem('user_id');
        
        // Rediriger vers la page de connexion
        window.location.href = 'seconnecter.html';
    }
    
    // Exposer la fonction logout globalement
    window.logout = logout;
</script>

<script>
    // V√©rifier si la page est accessible
    document.addEventListener('DOMContentLoaded', function() {
        // Si l'utilisateur essaie d'acc√©der √† cette page sans √™tre connect√©,
        // la redirection se fera automatiquement via le premier script
        
        // Ajouter un √©couteur pour le bouton de d√©connexion
        const logoutBtn = document.querySelector('.btn20');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                logout();
            });
        }
        
        // Mettre √† jour le texte de bienvenue toutes les secondes
        setInterval(() => {
            const userName = localStorage.getItem('user_name');
            if (userName && document.getElementById('userName')) {
                document.getElementById('userName').textContent = userName;
            }
        }, 1000);
    });
</script>

</body>

</html>